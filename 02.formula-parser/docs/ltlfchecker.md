## TODO

- remove `visited_` variable
- fix `is_global`, add it back